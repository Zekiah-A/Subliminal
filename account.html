<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>My Account | Subliminal</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="favicon.ico">
	<link rel="stylesheet" href="./styles.css">
	<link rel="stylesheet" href="./account.css">
	<script type="module" src="src/components/component-registrar.js"></script>
	<script type="module" src="src/components/account-options-template.js"></script>
	<script type="module" src="src/components/header-template.js"></script>
	<script type="module" src="src/components/login-template.js"></script>
	<script type="module" src="src/server.js"></script>
	<script type="module" src="src/account-manager.js"></script>
	<script type="module" src="src/account.js"></script>
</head>
<body class="headered-body">
	<subliminal-header></subliminal-header>
	<dialog id="profileRole" style="height: fit-content; width: 40%;" class="popup">
		<h2>Your profile role:</h2>
		<div class="role-grid">
			<button type="button" class="popup-button" onclick="setProfileRole('writer');">Writer</button>
			<button type="button" class="popup-button" onclick="setProfileRole('reader');">Reader</button>
			<button type="button" class="popup-button" onclick="setProfileRole('listener');">Listener</button>
			<button type="button" class="popup-button" onclick="setProfileRole('poet');">Poet</button>
			<button type="button" class="popup-button" onclick="setProfileRole('critic');">Critic</button>
			<button type="button" class="popup-button" onclick="setProfileRole('reviewer');">Reviewer</button>
			<button type="button" class="popup-button" onclick="setProfileRole('analyser');">Analyser</button>
			<button type="button" class="popup-button" onclick="setProfileRole('teacher');">Teacher</button>
			<button type="button" class="popup-button" onclick="setProfileRole('student');">Student</button>
			<button type="button" class="popup-button" onclick="setProfileRole('hobbyist');">Hobbyist</button>
			<button type="button" class="popup-button" onclick="setProfileRole('casual');">Casual</button>
			<button type="button" class="popup-button" onclick="setProfileRole('artist');">Artist</button>
		</div>
		<br>
		<input type="text" class="popup-input" placeholder="Write your own!" maxlength="12" oninput="setProfileRole(value)">
		<br>
		<button type="button" class="popup-button" onclick="profileRole.close(); updateAccount('role', role)">Done</button>
		<p style="opacity: 0.6;">These are for vanity purposes only, setting a certain role won't limit you from doing certain actions!</p>
	</dialog>
	<dialog id="accountEmail" style="height: fit-content; width: 30%;" class="popup flex-popup">
		<h2>Enter your email:</h2>
		<input id="accountEmailInput" type="text" class="popup-input" placeholder="example@example.com" maxlength="64" oninput="setProfileEmail(value)">
		<br>
		<button type="button" class="popup-button" onclick="accountEmail.close(); updateAccount('email', email)">Done</button>
	</dialog>
	<div class="div-centre">
		<div class="profile-container">
		<div class="profile-picture">
			<img id="profileAvatar" alt="Avatar" src="https://user-images.githubusercontent.com/11250/39013954-f5091c3a-43e6-11e8-9cac-37cf8e8c8e4e.jpg" width="200" height="200"
				ondragenter="
					event.stopPropagation()
					event.preventDefault()
				" ondragover="
					event.stopPropagation()
					event.preventDefault()
					this.style.outline = '4px solid var(--input-hilight)'
					profilePictureButton.focus()
				" ondrop="
					event.stopPropagation()
					event.preventDefault()
					this.style.outline = 'initial'
					const file = event.dataTransfer.files[0]
					if (file && file.type.startsWith('image/')) updateProfilePicture(file)
				" ondragleave="
					event.stopPropagation()
					event.preventDefault() 
					this.style.outline = 'initial'
				">
				<button type="button" id="profilePictureButton" onclick="profilePictureInput.click()">
					<img src="./assets/EditPhoto.svg" alt="Edit">
					Click to change
				</button>
				<input type="file" id="profilePictureInput" accept="image/*" style="display: none;" onchange="
					if (this.files[0]) {
						updateProfilePicture(this.files[0])
					}">
		</div>
			<div class="profile-aside">
				<div class="profile-title-container">
					<p class="profile-title">I'm </p>
					<input id="profileName" type="text" class="profile-title editable" placeholder="Nickname"
						maxlength="16" oninput="setProfileName(this.value)"
						onblur="updateAccount('pen-name', profileName.value)" value="Nameless">
					<p class="profile-title">, </p>
					<p class="profile-title" id="profileRoleText" style="cursor: pointer;"
						onmouseover="this.style.textDecoration = 'underline'" onmouseleave="this.style.textDecoration = 'none';"
						onclick="profileRole.showModal()">a writer</p>
				</div>
				<span id="profileUsername">@username</span>
				<textarea id="profileBiography" class="editable" placeholder="Click here to start writing your bio!"
					maxlength="360" onblur="updateAccount('biography', profileBiography.value)"></textarea>
				<div class="profile-details">
					<div>üåç&nbsp;<input id="profileLocation" type="text" class="editable"
						onblur="updateAccount('location', profileLocation.value)"
						placeholder="Planet of Earth, Milky Way" maxlength="36"></div>
					<div>üìå&nbsp;<span id="profilePinned">Poem1, Poem2, Poem3, Poem4, Poem5</span></div>
				</div>
				<div id="profileBadges"></div>
			</div>
		</div>
		<br><br>

		<h2>Recent works:</h2>
		<div id="recentWorks"></div>

		<h2>Following:</h2>
		<div id="followingAccounts"></div>

		<h2>Private account info:</h2>
		<hr>
		<p>This stuff won't appear on your profile, it is for your eyes only!</p>
		<button type="button" style="padding: 8px; margin: 4px; position: relative;" onclick="accountEmail.showModal()">
			Change Email
			<div class="button-tooltip">Change the primary email used for login, and allow us to notify you when a new poem is uploaded, your poem recieves some feedback, or other important updates</div>
		</button>

		<br><br>
		<h2>Draft poems:</h2>
		<div id="draftPoems">
			<div class="poem-card">
				<h4>London</h4>
				<p class="poem-preview">I walk through each chartered street, near where the chartered thames do flow. And marks on every face I meet, marks of weakness, marks of woe.</p>
			</div>
		</div>

		<br><br>
		<hr>
		<details>
			<summary>
				<h2 style="cursor: pointer; display: inline-block;">Account agreement</h2>
			</summary>
			<h3>Privacy and Security:</h3>
			<p>
				Account security is a priority here. This site does not use tracking systems,
				external cookies, or any methods that compromise your privacy. We never sell,
				share, or process your personal information or account data with any third party.
				If you believe your account has been compromised or someone else has gained access
				to it, please report the issue immediately <a href="mailto:zekiahamoako@outlook.com">here</a>.
			</p>
			<h3>Terms of Service (TOS) and Guidelines:</h3>
			<p>
				This site aims to be a place for freedom of expression through the medium of poetry.
				While we support and protect your creative freedom, we cannot take responsibility for
				if you face penalties, legal action, or persecution from institutions, governments,
				or individuals due to your work submitted here. However, we will strive to protect your
				rights and works whenever possible. This includes:
			</p>
			<ul>
				<li>Keeping your private information confidential and only accessible to you.</li>
				<li>Minimizing the information at risk in the event of a data breach.</li>
				<li>Enabling you to delete any data you've uploaded, in accordance with GDPR regulations.</li>
			</ul>
			<p>
				If you use this site to publicly post illegal, NSFW (Not Safe For Work), or otherwise
				morally objectionable content, your account may be suspended, and your IP address
				blocked from submitting future content.
			</p>
			<p>
				Please be aware that if you publicly post any personally identifying information on this
				site, it could be used against you by others. We are not liable for any consequences that
				may arise from such actions.
			</p>
		</details>
	</div>
	<a href="./poems" class="back"> &lt;- Back</a>
</body>
</html>
